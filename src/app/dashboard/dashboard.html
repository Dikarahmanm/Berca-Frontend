<!-- src/app/dashboard/dashboard.html - UPDATED VERSION -->

<!-- ✅ UPDATE: Topbar dengan semua event handlers -->
<app-topbar [username]="username" [role]="role" [avatarUrl]="avatarUrl" [notificationCount]="notificationCount"
  [pageTitle]="currentPageTitle" (logoutClicked)="onLogout()" (notificationClicked)="onNotificationClick()"
  (profileClicked)="onProfileClick()" (settingsClicked)="onSettingsClick()"
  (notificationSettingsClicked)="onNotificationSettingsClick()" (helpClicked)="onHelpClick()">
</app-topbar>

<div class="dashboard-container">
  <!-- Modern Sidebar Navigation -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-brand">
        <div class="brand-icon">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
          </svg>
        </div>
        <span class="brand-text">Toko Eniwan</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-section">
        <span class="nav-section-title">Management</span>
        <ul class="nav-list">
          <li class="nav-item">
            <a routerLink="users" routerLinkActive="active" class="nav-link">
              <div class="nav-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
              <span class="nav-text">Users</span>
              <div class="nav-indicator"></div>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="activity-log" routerLinkActive="active" class="nav-link">
              <div class="nav-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                </svg>
              </div>
              <span class="nav-text">Activity Logs</span>
              <div class="nav-indicator"></div>
            </a>
          </li>

          <!-- ✅ ADD: Future navigation items -->
          <li class="nav-item">
            <a routerLink="inventory" routerLinkActive="active" class="nav-link" title="Coming Soon">
              <div class="nav-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                </svg>
              </div>
              <span class="nav-text">Inventory</span>
              <div class="nav-indicator"></div>
              <span class="coming-soon-badge">Soon</span>
            </a>
          </li>

          <li class="nav-item">
            <a routerLink="pos" routerLinkActive="active" class="nav-link" title="Coming Soon">
              <div class="nav-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3 3h18l-2 13H5L3 3zM5 3H2v2h3V3zM7 8h10v2H7V8zM7 11h10v2H7v-2z" />
                </svg>
              </div>
              <span class="nav-text">POS System</span>
              <div class="nav-indicator"></div>
              <span class="coming-soon-badge">Soon</span>
            </a>
          </li>
        </ul>
      </div>

      <div class="nav-section">
        <span class="nav-section-title">Analytics</span>
        <ul class="nav-list">
          <li class="nav-item">
            <div class="stat-card">
              <div class="stat-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                  <rect x="3" y="14" width="4" height="7" rx="1" />
                  <rect x="10" y="10" width="4" height="11" rx="1" />
                  <rect x="17" y="6" width="4" height="15" rx="1" />
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value">{{ userStats.total }}</span>
                <span class="stat-label">Total Users</span>
              </div>
            </div>
          </li>

          <!-- ✅ ADD: More stat cards -->
          <li class="nav-item">
            <div class="stat-card">
              <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value">{{ notificationCount }}</span>
                <span class="stat-label">Alerts</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-header">
      <div class="page-title">
        <h1>{{ currentPageTitle }}</h1>
        <p class="page-subtitle">{{ currentPageSubtitle }}</p>
      </div>

      <div class="quick-actions">
        <button class="action-btn primary" (click)="refreshData()">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
          Refresh
        </button>

        <!-- ✅ ADD: Quick access to profile -->
        <button class="action-btn secondary" (click)="onProfileClick()" title="Quick Profile Access">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
          </svg>
          Profile
        </button>
      </div>
    </div>

    <div class="content-body">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>