<!-- src/app/modules/notifications/notification-item/notification-item.component.html -->
<!-- âœ… FIXED: Template dengan proper *ngIf usage -->

<div class="notification-item" [class.unread]="!notification.isRead" [class.expired]="isExpired()"
    [class]="getPriorityClass()" (click)="onItemClick()">

    <!-- Notification Icon -->
    <div class="notification-icon" [style.background-color]="getIconColor()">
        <span class="material-icons">{{ getIcon() }}</span>
    </div>

    <!-- Notification Content -->
    <div class="notification-content">
        <div class="notification-header">
            <h4 class="notification-title">
                {{ notification.title }}
                <!-- Smart Notification Badge -->
                <span class="smart-badge" *ngIf="isSmartNotification()" title="Smart Notification">ðŸ¤–</span>
            </h4>
            <span class="notification-time">{{ formatTime(notification.createdAt) }}</span>
        </div>

        <p class="notification-message">{{ notification.message }}</p>

        <!-- Smart Notification Details -->
        <div class="smart-details" *ngIf="isSmartNotification()">
            <div class="potential-loss" *ngIf="getPotentialLoss()">
                <span class="material-icons">warning</span>
                <span>Potential Loss: {{ getPotentialLoss() }}</span>
            </div>
            <div class="action-items" *ngIf="getActionItemsCount() > 0">
                <span class="material-icons">checklist</span>
                <span>{{ getActionItemsCount() }} action items</span>
            </div>
        </div>

        <div class="notification-meta">
            <span class="notification-type">{{ getTypeLabel() }}</span>
            <span class="notification-priority" [class]="'priority-' + notification.priority.toLowerCase()">
                {{ notification.priority }}
            </span>
        </div>

        <!-- Action Button (if available) -->
        <div class="notification-action" *ngIf="notification.actionUrl && notification.actionText">
            <button class="action-btn" (click)="$event.stopPropagation()">
                {{ notification.actionText }}
            </button>
        </div>
    </div>

    <!-- Notification Actions -->
    <div class="notification-actions">
        <!-- Unread Indicator -->
        <div class="unread-indicator" *ngIf="!notification.isRead"></div>

        <!-- Delete Button -->
        <button class="delete-btn" (click)="onDeleteClick($event)" title="Hapus notifikasi">
            <span class="material-icons">delete</span>
        </button>
    </div>
</div>